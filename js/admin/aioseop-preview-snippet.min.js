var docTitle="",snippetTitle="",snippetDescription="",aioseopTitle="",aioseopDescription="",timeout=0,isGutenberg=aioseop_preview_snippet.isGutenberg,autogenerateDescriptions=aioseop_preview_snippet.autogenerateDescriptions,skipExcerpt=aioseop_preview_snippet.skipExcerpt;function aioseopUpdateMetabox(){var e=[aioseopTitle,aioseopDescription];if("false"===isGutenberg){docTitle=$("#title");var t=$("#excerpt");e.push(docTitle,t),setTimeout(function(){tinymce.editors[0].on("KeyUp",function(){aioseopUpdatePreviewSnippet()})},1e3)}else window._wpLoadBlockEditor.then(function(){setTimeout(function(){wp.data.subscribe(function(){clearTimeout(timeout),timeout=setTimeout(function(){aioseopUpdatePreviewSnippet()},100)})})});e.forEach(function(e){e.on("input",function(){aioseopUpdatePreviewSnippet()})}),timeout=setTimeout(function(){aioseopUpdatePreviewSnippet()},1e3)}function aioseopUpdatePreviewSnippet(){var e="",t="",i="";i="false"===isGutenberg?(e=aioseopStripMarkup($.trim($("#title").val())),t=aioseopShortenDescription($("#content_ifr").contents().find("body")[0].innerHTML),aioseopShortenDescription($.trim($("#excerpt").val()))):(e=aioseopStripMarkup($.trim($("#post-title-0").val())),t=aioseopShortenDescription(wp.data.select("core/editor").getEditedPostAttribute("content")),aioseopShortenDescription(wp.data.select("core/editor").getEditedPostAttribute("excerpt")));var o=aioseopStripMarkup($.trim($('input[name="aiosp_title').val())),p=aioseopStripMarkup($.trim($('textarea[name="aiosp_description"]').val()));snippetTitle.text(e),aioseopTitle.attr("placeholder",e),""!==o&&snippetTitle.text(o),"on"===autogenerateDescriptions&&(snippetDescription.text(t),aioseopDescription.attr("placeholder",t),"on"!==skipExcerpt&""!==i&&(snippetDescription.text(i),aioseopDescription.attr("placeholder",i))),""!==p&&(snippetDescription.text(p),aioseopDescription.attr("placeholder",p))}function aioseopShortenDescription(e){if(160<(e=aioseopStripMarkup(e)).length){var t=e.length-160,i=new XRegExp("[^\\pZ\\pP]*.{"+t+"}$");e=XRegExp.replace(e,i,""),e+=" ..."}return e}function aioseopStripMarkup(e){return aioseopDecodeHtmlEntities((e=(e=e.replace(/(<[^ >][^>]*>)?/gm,"")).replace(/\s\s+/g," ")).trim())}function aioseopDecodeHtmlEntities(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}$(function(){snippetTitle=$("#aiosp_snippet_title"),snippetDescription=$("#aioseop_snippet_description"),aioseopTitle=$('input[name="aiosp_title"]'),aioseopDescription=$('textarea[name="aiosp_description"]'),aioseopUpdateMetabox()});